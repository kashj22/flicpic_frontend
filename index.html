<!DOCTYPE html>
<html ng-app="FlicPic">
<head>
  <title>FlicPic</title>
  <!-- External JS Resources -->
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.2/angular.min.js"></script>
  <script src="https://cdn.rawgit.com/auth0/angular-jwt/master/dist/angular-jwt.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-resource.min.js"></script>

  <!-- Internal JS Resources -->
  <script type="text/javascript" src="./js/app.js"></script>
  <script type="text/javascript" src="./js/moviesController.js"></script>
  <script type="text/javascript" src="./js/usersController.js"></script>
  <script type="text/javascript" src="./js/models/user.js"></script>
  <script type="text/javascript" src="./js/services/tokenService.js"></script>
  <script type="text/javascript" src="./js/services/authInterceptor.js"></script>

  <link rel="stylesheet" type="text/css" href="css/jTinder.css">
</head>
<body ng-controller="UsersController as users">
  <main ng-controller="MoviesController as movies" >
    <header>

    <nav>
      <ul>
        <li><a href="#login">Log In</a></li>
        <li><a href="#register">Register</a></li>
        <li><a ng-click="users.getUsers()">Users</a></li>
        <li><a ng-click="users.logout()">Log Out</a></li>
      </ul>
    </nav>




      <h1>Welcome To FlicPic</h1>
      <h3>Find Movies by searching for titles or genres</h3>
    </header>


    <div ng-if="(users.isloggedIn())">
      <h3>Welcome back, {{ users.user.fullname }}!</h3>
    </div>

    <section ng-if="(users.loggedIn())">
      <p>Here is the list of our current users:</p>
      <ul>
        <li ng-repeat="user in users.all">
          <strong>{{user.local.fullname}}</strong>
        </li>
      </ul>
    </section>  
   

    <section ng-if="(!users.isloggedIn())">
      <h3>Login</h3>
      <form id="login" ng-submit="users.login()">
        <label for="email">Email</label>
        <input type="text" name="email" placeholder="What is your email?" ng-model="users.user.email">

        <label for="password">Password</label>
        <input type="password" name="password" placeholder="What is your password?" ng-model="users.user.password">

        <input type="submit" value="Access">
      </form>
    </section>

    {{ users.user }}

    <section ng-if="(!users.isloggedIn())">
      <h3>Register</h3>
      <form id="register" ng-submit="users.register()">
        

        <label for="fullname">Full Name</label>
        <input type="fullname" name="fullname" placeholder="fullname" ng-model="users.user.fullname">


        <label for="email">Email</label>
        <input type="text" name="email" placeholder="What is your email?" ng-model="users.user.email">

        <label for="password">Password</label>
        <input type="password" name="password" placeholder="Password" ng-model="users.user.password">

        <input type="submit" value="Access">
      </form>
    </section>

    <br>

    <section ng-show="users.isLoggedIn()">
      <form id="movies" ng-submit="movies.getMovies()">
        <input type="text" placeholder="Enter Movie Title" ng-model="movies.title">
        <button type="submit" class="btn btn-default">Submit</button>
      </form>

  <!--     <div ng-view></div> -->
      
      <form id="genres" method="GET" ng-submit="movies.getMovieByGenre(genre)">
        <select ng-model="genre.name" ng-options="genre.id as genre.name for genre in movies.genres"></select>

        <!-- {{ genre.name }} -->

        <button type="submit" class="btn btn-default">Submit</button>
      </form> 
    </section> 

   <div id="tinderslide"> <!-- jTinder container -->
   <ul ng-repeat="n in movies.all">
    <li class="panel">
      <img ng-src="http://image.tmdb.org/t/p/w500/{{n.poster_path}}">
       <div class="like"></div>
       <div class="dislike"></div>
    </li>
   </ul>
   </div>

   <!-- jTinder trigger by buttons  -->
   <div class="actions">
           <a href="#" class="dislike"><i></i></a>
           <a href="#" class="like"><i></i></a>
       </div>
  </main>

  <!-- jQuery lib -->
  <script type="text/javascript" src="js/jTinder/jquery.min.js"></script> 

  <!-- transform2d lib -->
  <script type="text/javascript" src="./js/jTinder/jquery.transform2d.js"></script>

  <!-- jTinder lib -->
  <script type="text/javascript" src="./js/jTinder/jquery.jTinder.js"></script>

  <!-- jTinder initialization script -->
  <script>$("#tinderslide").jTinder();</script>
  </body>
  </html>